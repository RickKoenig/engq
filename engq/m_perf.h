//#define PERF_ON
#define PERF_FRAMES 64 // power of 2 , 128 is a good value
// user section
enum {
// m_vid.c
	VIDLOCK,
	VIDUNLOCK,
// m_debp.c
	DRAWDEBPRINT,
// m_win.c
	MAINLOOP,
	STATEPROC,
// m_wh.c
	CHECKMESS,  
	WAITFRAME,   
	DRAWCURSOR,
	WINPROC,
// m_vidgdi.c
	CONVERT32TO24,
	GETDC,
	CREATECOMPATIBLEDC,
	GETOBJECT,
	SELECTOBJECT,
	BLITDIB,
	SELECTOBJECT2, 
	RELEASEDC,
// m_state.c
	STATEINIT,
	STATEEXIT,
	STATEDRAW3D,
	STATEDRAW2D,
// m_audio.c
	AUDIOBABYSIT,
// m_viddraw.c	
	DDRAWLOCK,
	DDRAWUNLOCK,
// m_matrix.c
	XFORMVECS,
	MULMAT3D,
	PROJVECS,
// d_floattri.c
	MFSETUP,
	MFPERSTEX,
	MFTEX,
	MFSHADE,
	MFWBUF,
	SETLEFTGENEDGE,
	SETRIGHTGENEDGE,
	RENDERPERSTEX,
	RENDERPERSTEXNCK,
	RENDERPERSTEXXLU,
	RENDERPERSTEXXLUNCK,
	RENDERPERSTEXW,
	RENDERPERSTEXWNCK,
	RENDERPERSTEXWXLU,
	RENDERPERSTEXWXLUNCK,
	RENDERFLAT,
	RENDERFLATXLU,
	RENDERFLATW,
	RENDERFLATWXLU,
	RENDERSHADE,
	RENDERSHADEXLU,
	RENDERSHADEW,
	RENDERSHADEWXLU,
	RENDERTEX,
	RENDERTEXNCK,
	RENDERTEXW,
	RENDERTEXWNCK,
	RENDERTEXXLU,
	RENDERTEXXLUNCK,
	RENDERTEXWXLU,
	RENDERTEXWXLUNCK,
	DRAWGENTRIA,
	DRAWGENTRIB,
	DRAWGENTRIC,
	DRAWGENTRID,
	DRAWGENTRIE,
	DRAWGENTRIF,
	DRAWTRIS,
// d_model.c
	DRAWMODEL,
	NORM1,
	NORM2,
	NORM3,
	NORM4,
// d_tree.c
	DRAWTREE,
	BEGINSCENE,
	ENDSCENE,
	BUILDTREEMATS,
	DOANIMS,
// d_lights.c
	DOLIGHTS,
// m_gfx_jpg.c
	JPEG,
	JPEG1,
	JPEG2,
	JPEG3,
	JPEG4,
	JPEG5,
	JPEG6,
	JPEG7,
	JPEG8,
	JPEG9,
// test
	TEST1,
	TEST2,
	TEST3,
	TEST4,
	TEST5,
	TEST6,
	TEST7,
	TEST8,
	TEST9,
	TEST10,
	TEST11,
	TEST12,
	LOGGER,
	DDSREADA,
// m_mem
	MEMALLOC,
	MEMFREE,
// groupanalyze
	GMULT,
	GADD,
	GCALC,
	RUBIPROC,
	GANAL,
	GPRINT,
	GHASH,
	GFILTER,
	GEQ,
	LINE2ROAD,
	// zeta
	ZETAFUNC,
	ZETATERM,
	ZETAPROD,
	MAT2BRUTE,

	MEDIAN_FAST,
	MEDIAN_MYHEAP,
	MEDIAN_SLOW,
//	neural
	RUN_NETWORK,
	RUN_NETWORK1,
	RUN_NETWORK2,
	RUN_NETWORK3,
	GRAD_DESCENT,
	GRAD_DESCENT1,
	GRAD_DESCENT2,
	GRAD_DESCENT3,
	GRAD_DESCENT4,
	GRAD_DESCENT5,
};

#ifdef PERF_ON
#ifdef PERFNAMES
// make this match enums
C8* perfnames[]={
// m_vid.cpp
	"VIDLOCK",
	"VIDUNLOCK",
// m_debp.cpp
	"DRAWDEBPRINT",
// m_win.cpp
	"MAINLOOP",
	"STATEPROC",
// m_wh.cpp
	"CHECKMESS",  
	"WAITFRAME",   
	"DRAWCURSOR",
	"WINPROC",
// m_vidgdi.cpp
	"CONVERT32TO24",
	"GETDC",
	"CREATECOMPATIBLEDC",
	"GETOBJECT",
	"SELECTOBJECT",
	"BLITDIB",
	"SELECTOBJECT2", 
	"RELEASEDC",
// m_state.cpp
	"STATEINIT",
	"STATEEXIT",
	"STATEDRAW3D",
	"STATEDRAW2D",
// m_audio.cpp
	"AUDIOBABYSIT",
// m_viddraw.cpp
	"DDRAWLOCK",
	"DDRAWUNLOCK",
// m_matrix.cpp
	"XFORMVECS",
	"MULMAT3D",
	"PROJVECS",
// d_floattri.cpp
	"MFSETUP",
	"MFPERSTEX",
	"MFTEX",
	"MFSHADE",
	"MFWBUF",
	"SETLEFTGENEDGE",
	"SETRIGHTGENEDGE",
	"RENDERPERSTEX",
	"RENDERPERSTEXNCK",
	"RENDERPERSTEXXLU",
	"RENDERPERSTEXXLUNCK",
	"RENDERPERSTEXW",
	"RENDERPERSTEXWNCK",
	"RENDERPERSTEXWXLU",
	"RENDERPERSTEXWXLUNCK",
	"RENDERFLAT",
	"RENDERFLATXLU",
	"RENDERFLATW",
	"RENDERFLATWXLU",
	"RENDERSHADE",
	"RENDERSHADEXLU",
	"RENDERSHADEW",
	"RENDERSHADEWXLU",
	"RENDERTEX",
	"RENDERTEXNCK",
	"RENDERTEXW",
	"RENDERTEXWNCK",
	"RENDERTEXXLU",
	"RENDERTEXXLUNCK",
	"RENDERTEXWXLU",
	"RENDERTEXWXLUNCK",
	"DRAWGENTRIA",
	"DRAWGENTRIB",
	"DRAWGENTRIC",
	"DRAWGENTRID",
	"DRAWGENTRIE",
	"DRAWGENTRIF",
	"DRAWTRIS",
// d_model.cpp
	"DRAWMODEL",
	"NORM1",
	"NORM2",
	"NORM3",
	"NORM4",
// d_tree.cpp
	"DRAWTREE",
	"BEGINSCENE",
	"ENDSCENE",
	"BUILDTREEMATS",
	"DOANIMS",
// d_lights.cpp
	"DOLIGHTS",
// m_gfx_jpg.cpp
	"JPEG",
	"JPEG1",
	"JPEG2",
	"JPEG3",
	"JPEG4",
	"JPEG5",
	"JPEG6",
	"JPEG7",
	"JPEG8",
	"JPEG9",
// test
	"TEST1",
	"TEST2",
	"TEST3",
	"TEST4",
	"TEST5",
	"TEST6",
	"TEST7",
	"TEST8",
	"TEST9",
	"TEST10",
	"TEST11",
	"TEST12",
	"LOGGER",
	"DDSREADA",
// m_mem.cpp
	"MEMALLOC",
	"MEMFREE",
// groupanalyze
	"GMULT",
	"GADD",
	"GCALC",
	"RUBIPROC",
	"GANAL",
	"GPRINT",
	"GHASH",
	"GFILTER",
	"GEQ",
	"LINE2ROAD",
	"ZETAFUNC",
	"ZETATERM",
	"ZETAPROD",
	"MAT2BRUTE",

	"MEDIAN FAST",
	"MEDIAN MY HEAP",
	"MEDIAN SLOW",
		//	neural
	"RUN_NETWORK",
	"RUN_NETWORK1",
	"RUN_NETWORK2",
	"RUN_NETWORK3",
	"GRAD_DESCENT",
	"GRAD_DESCENT1",
	"GRAD_DESCENT2",
	"GRAD_DESCENT3",
	"GRAD_DESCENT4",
	"GRAD_DESCENT5",
};
// end user section

#define PERF_NUM (sizeof(perfnames)/sizeof(perfnames[0]))
#endif
#endif



#ifdef PERF_ON
void perf_test();
void perf_start(U32 index);
void perf_end(U32 index);
void perf_frame();
#else
#define perf_test()
#define perf_start(index)
#define perf_end(index)
#define perf_frame()
#endif

// for reference
#if 0
/*
	DCTHUFFDECOMP,
	DECOMPINIT,
	IDCT,

	USEDBIT,
	BLOCK,
	TEST1,
	TEST2,
	TEST3,

	GETHUFF1,
	GETHUFF2,
	BITCOEF,
	HUFFLOOP,
	TESTASM,

	SLOWBLOCK,
	FASTBLOCK,
	CALCCENTER,
	CALCSUMS,
	CALCPARTIT,

	CALCVARIANCE,
	CALCNORMAL,
	REDUCECOLORS,
	VARCONV24TO16,
	FILEREAD,

	DECOMP,
	MULFREQ,
	IDOW,
	YUV2RGB,
	ZEDCOMP,

	BINTREEZEDCOMP,
	ZEDCOMPB,
	CHRCMP,
	ADDBINTREE,
	DELBINTREE,

	CFINDNUMMAT,
	BINFINDBESTMAT,
	ASMDECOMP,
	DECOMP8TO16,


	DEBPROCESSKEY,
	DRAWDEBPRINT,


	LOADLWO,
	LOADLWS,
	DOLIGHTS,

	LWOOPTUV,
	LWOOPT,
	LWOLOOP,
	FIXUPFLAGS,
	SETBBOX,

	SETFORCLIP,
	DRAWORDER,
	LOADUV,
	LINE2ROAD,
	LOADMXS,

	MERGENORMS,
	MULTIMAT,
	MERGEGROUPS,
	MERGECVERTS,
	MERGEUVS,

	MERGEGROUPS1,
	MERGEGROUPS2,
	MERGEGROUPS3,
	MERGEGROUPS4,
	MERGEGROUPS5,

	PROCAPLAYER,
	DRAWSTRING,



	PRINTDEBPRINT,

	
	CONVERT32TO565,
*/#endif
